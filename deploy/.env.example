# Bolt IT Environment Configuration
# Copy this file to .env and fill in actual values
# NEVER commit .env with real credentials to version control

# =============================================================================
# ENVIRONMENT
# =============================================================================
ENVIRONMENT=pilot
AWS_REGION=us-east-1

# =============================================================================
# AWS RESOURCES (from terraform outputs)
# =============================================================================
S3_ARTIFACTS_BUCKET=boltit-artifacts-pilot
S3_BACKUPS_BUCKET=boltit-backups-pilot
KMS_KEY_ID=12345678-1234-1234-1234-123456789012

# ECR image URIs (update after pushing images)
ECR_API_URI=123456789012.dkr.ecr.us-east-1.amazonaws.com/boltit-api:latest
ECR_MODEL_URI=123456789012.dkr.ecr.us-east-1.amazonaws.com/boltit-model:latest
ECR_WORKER_URI=123456789012.dkr.ecr.us-east-1.amazonaws.com/boltit-worker:latest

# =============================================================================
# DATABASE
# =============================================================================
DB_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
DATABASE_URL=postgresql://boltit_admin:CHANGE_ME_STRONG_PASSWORD_HERE@postgres:5432/boltit

# =============================================================================
# REDIS
# =============================================================================
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_HERE
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD_HERE@redis:6379/0

# =============================================================================
# API CONFIGURATION
# =============================================================================
API_SECRET_KEY=CHANGE_ME_RANDOM_SECRET_KEY_64_CHARS_MIN
API_BASE_URL=https://api.boltit.example.com

# =============================================================================
# MODEL CONFIGURATION
# =============================================================================
MODEL_VERSION=v1.0.0
MODEL_PATH=/models/current
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# =============================================================================
# FEATURE FLAGS
# =============================================================================
ENABLE_METRICS=true
ENABLE_AUDIT_LOG=true
AUTO_APPLY_ENABLED=false
AUTO_APPLY_CONFIDENCE_THRESHOLD=0.92
AUTO_APPLY_SIMILARITY_THRESHOLD=0.90
ENABLE_KIOSK_MODE=true

# =============================================================================
# THRESHOLDS AND LIMITS
# =============================================================================
AUTO_ROUTE_CONFIDENCE_THRESHOLD=0.80
HUMAN_REVIEW_CONFIDENCE_THRESHOLD=0.70
SIMILARITY_DUPLICATE_THRESHOLD=0.85
MAX_AUTO_APPLY_PER_ASSET_PER_DAY=5
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# =============================================================================
# LOGGING
# =============================================================================
LOG_LEVEL=INFO
CLOUDWATCH_LOG_GROUP_API=/aws/boltit/pilot/api
CLOUDWATCH_LOG_GROUP_MODEL=/aws/boltit/pilot/model
CLOUDWATCH_LOG_GROUP_WORKER=/aws/boltit/pilot/worker
CLOUDWATCH_LOG_GROUP_DB=/aws/boltit/pilot/db

# =============================================================================
# MONITORING
# =============================================================================
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9090
METRICS_EXPORT_INTERVAL_SECONDS=60

# =============================================================================
# SECURITY
# =============================================================================
# Secrets Manager secret names (API will fetch from AWS Secrets Manager)
SECRET_DB_CREDENTIALS_NAME=boltit/pilot/db-credentials
SECRET_API_MASTER_KEY_NAME=boltit/pilot/api-master-key

# CORS settings
CORS_ORIGINS=https://api.boltit.example.com,https://kiosk.boltit.example.com
CORS_ALLOW_CREDENTIALS=true

# Session settings
SESSION_TIMEOUT_MINUTES=30
API_KEY_ROTATION_DAYS=90

# =============================================================================
# RETRAIN PIPELINE
# =============================================================================
RETRAIN_SCHEDULE="0 2 * * 0"  # Weekly on Sunday at 2 AM UTC
RETRAIN_MIN_SAMPLES=1000
RETRAIN_VALIDATION_SPLIT=0.2
RETRAIN_MIN_ACCURACY_THRESHOLD=0.85
RETRAIN_AUTO_PROMOTE=false  # Require manual promotion

# =============================================================================
# BACKUP AND RETENTION
# =============================================================================
DB_BACKUP_SCHEDULE="0 3 * * *"  # Daily at 3 AM UTC
DB_BACKUP_RETENTION_DAYS=30
AUDIT_LOG_RETENTION_DAYS=365
MODEL_ARTIFACT_RETENTION_DAYS=365

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
API_WORKERS=4
API_WORKER_CONNECTIONS=1000
API_TIMEOUT_SECONDS=60
MODEL_BATCH_SIZE=32
MODEL_MAX_LENGTH=512
POSTGRES_MAX_CONNECTIONS=100
REDIS_MAX_CONNECTIONS=50

# =============================================================================
# DEVELOPMENT / TESTING (set to false in production)
# =============================================================================
DEBUG=false
ENABLE_SWAGGER_UI=true
ENABLE_RELOAD=false
MOCK_MODEL_SERVICE=false
SKIP_AUTH_IN_DEV=false

# =============================================================================
# NOTES
# =============================================================================
# - Generate strong passwords: openssl rand -base64 32
# - Generate API secret key: openssl rand -hex 64
# - Never commit this file with real values to version control
# - Use AWS Secrets Manager for production secrets
# - Rotate credentials regularly (quarterly minimum)
# - Keep this file in sync with infra/ENV.pilot

# Last Updated: 2025-10-31
